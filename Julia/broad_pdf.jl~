#broad_pdf.jl
using JSON

function create_broad_pdf(n_x::Int, n_y::Int, n_z::Int) :: Dict{Tuple{Any,Any,Any},Float64}
end # create_broad_pdf()

function to_tuple(X) :: Any
    if typeof(X) <: Array
        tmp = [ to_tuple(x) for x in X ]
        x = (tmp[1:end]...)
    else
        return X
    end
end


function array_to_dict(a) :: Dict{Tuple{Any,Any,Any}, Float64}
    local d = Dict{Tuple{Any,Any,Any}, Float64}()
    for p in a
        t = Tuple{Any,Any,Any}( to_tuple( p[1] ) )
        d[t] = Float64( p[2] )
    end
    return d
end


function read_pdf(filename::String) ::  Dict{Tuple{Any,Any,Any}, Float64}
    a = JSON.parsefile(filename)
    return array_to_dict(a)
end


end
